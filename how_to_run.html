<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to Run the Pipeline &#8212; pyGenClean 1.8.3 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.8.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Automatic Report" href="automatic_report.html" />
    <link rel="prev" title="Configuration Files" href="configuration_files.html" /> 
  </head>
  <body role="document">

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="automatic_report.html" title="Automatic Report"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration_files.html" title="Configuration Files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyGenClean 1.8.3 documentation</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="configuration_files.html"
                        title="previous chapter">Configuration Files</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="automatic_report.html"
                        title="next chapter">Automatic Report</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/how_to_run.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-run-the-pipeline">
<span id="how-ro-run"></span><h1>How to Run the Pipeline<a class="headerlink" href="#how-to-run-the-pipeline" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before using <a class="reference internal" href="module_content/pyGenClean.html#module-pyGenClean" title="pyGenClean"><code class="xref py py-mod docutils literal"><span class="pre">pyGenClean</span></code></a>, be sure to activate the appropriate
Python virtual environment (refer to the Linux
<a class="reference internal" href="install_linux.html#activate-virtual-environment-label"><span class="std std-ref">virtualenv</span></a> or
<a class="reference internal" href="install_linux.html#activate-conda-virtual-environment-label"><span class="std std-ref">conda</span></a> installation
section, or the
<a class="reference internal" href="install_windows.html#activate-conda-virtual-environment-win-label"><span class="std std-ref">Windows</span></a> installation
section for more information.</p>
</div>
<p>Modify the <a class="reference internal" href="configuration_files.html#first-conf-file"><span class="std std-ref">First Configuration File</span></a> so that it suits your needs. After following
the <a class="reference internal" href="protocol.html#preprocessing-label"><span class="std std-ref">Preprocessing Steps</span></a> described in the <a class="reference internal" href="protocol.html#proposed-protocol-label"><span class="std std-ref">Proposed Protocol</span></a>
section, run the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> run_pyGenClean <span class="se">\</span>
&gt;     --conf configuration_example_1_of_2.ini <span class="se">\</span>
&gt;     --tfile /PATH/TO/ORIGINAL/DATASET_PREFIX
</pre></div>
</div>
<p>While the protocol is running, check the outputs according to the
<a class="reference internal" href="protocol.html#proposed-protocol-label"><span class="std std-ref">Proposed Protocol</span></a>. If there are any problems, interrupt the
analysis and make the required modifications. The completed steps can be skipped
by commenting them out, while using the last output dataset as the input one for
the steps that need to be done again.</p>
<p>Once everything was checked, locate the samples and the markers that need to be
removed. For example, if the output directory from the first dataset is
<code class="docutils literal"><span class="pre">data_clean_up.YYYY-MM-DD_HH.MM.SS</span></code>, the following command will help you:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">output_dir</span><span class="o">=</span>data_clean_up.YYYY-MM-DD_HH.MM.SS
<span class="gp">$</span> cat <span class="nv">$output_dir</span>/7_sex_check/sexcheck.list_problem_sex_ids <span class="se">\</span>
&gt;     <span class="nv">$output_dir</span>/9_find_related_samples/ibs.discarded_related_individuals <span class="se">\</span>
&gt;     <span class="nv">$output_dir</span>/10_check_ethnicity/ethnicity.outliers <span class="se">\</span>
&gt;     &gt; samples_to_remove.txt
</pre></div>
</div>
<p>Then, modify the first <code class="docutils literal"><span class="pre">subset</span></code> section in the <a class="reference internal" href="configuration_files.html#second-conf-file"><span class="std std-ref">Second Configuration File</span></a> so that
it reads:</p>
<div class="highlight-lighttpd"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="m">11</span><span class="p">]</span>
<span class="k">script</span> <span class="o">=</span> <span class="k">subset</span>
<span class="k">remove</span> <span class="o">=</span> <span class="k">samples_to_remove.txt</span>
<span class="k">exclude</span> <span class="o">=</span> <span class="k">data_clean_up.YYYY-MM-DD_HH.MM.SS</span><span class="n">/8_plate_bias/plate_bias.significant_SNPs.txt</span>
</pre></div>
</td></tr></table></div>
<p>Once everything was checked, run the following command to finish the data clean
up pipeline:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">output_dir</span><span class="o">=</span>data_clean_up.YYYY-MM-DD_HH.MM.SS
run_pyGenClean <span class="se">\</span>
    --conf configuration_example_2_of_2.ini <span class="se">\</span>
    --bfile <span class="nv">$output_dir</span>/6_sample_missingness/clean_mind
</pre></div>
</div>
<p>If you want to removed the markers that were flagged in the <code class="docutils literal"><span class="pre">flag_maf_zero</span></code>
and <code class="docutils literal"><span class="pre">flag_hw</span></code> section, performed the following commands (using the newly
created output directory <code class="docutils literal"><span class="pre">data_clean_up.YYYY-MM-DD_HH.MM.SS</span></code>):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">output_dir</span><span class="o">=</span>data_clean_up.YYYY-MM-DD_HH.MM.SS
<span class="gp">$</span> cat <span class="nv">$output_dir</span>/13_flag_maf_zero/flag_maf_0.list <span class="se">\</span>
&gt;     <span class="nv">$output_dir</span>/14_flag_hw/flag_hw.snp_flag_threshold_1e-4 <span class="se">\</span>
&gt;     &gt; markers_to_exclude.txt
<span class="gp">$</span> pyGenClean_subset_data <span class="se">\</span>
&gt;     --ifile <span class="nv">$output_dir</span>/14_remove_heterozygous_haploid/without_hh_genotypes <span class="se">\</span>
&gt;     --is-bfile <span class="se">\</span>
&gt;     --exclude markers_to_exclude.txt <span class="se">\</span>
&gt;     --out final_dataset
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="automatic_report.html" title="Automatic Report"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration_files.html" title="Configuration Files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyGenClean 1.8.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012, Louis-Philippe Lemieux Perreault.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>